
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dowhy.causal_model &#8212; DoWhy  documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    <p class="title logo__title">DoWhy  documentation</p>
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../readme.html">
  DoWhy | An end-to-end library for causal inference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/tutorial-causalinference-machinelearning-using-dowhy-econml.html">
  Tutorial on Causal Inference and its Connections to Machine Learning (Using DoWhy+EconML)
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy_simple_example.html">
  Getting started with DoWhy: A simple example
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy_confounder_example.html">
  Confounding Example: Finding causal effects from observed data
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy_estimation_methods.html">
  DoWhy: Different estimation methods for causal inference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy-simple-iv-example.html">
  Simple example on using Instrumental Variables method for estimation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/load_graph_example.html">
  Different ways to load an input graph
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy_causal_api.html">
  Demo for the DoWhy causal API
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/do_sampler_demo.html">
  Do-sampler Introduction
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/DoWhy-The%20Causal%20Story%20Behind%20Hotel%20Booking%20Cancellations.html">
  DoWhy-The Causal Story Behind Hotel Booking Cancellations
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy_example_effect_of_memberrewards_program.html">
  Estimating the effect of a Member Rewards program
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy_ihdp_data_example.html">
  DoWhy example on ihdp (Infant Health and Development Program) dataset
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy_lalonde_example.html">
  DoWhy example on the Lalonde dataset
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy_refutation_testing.html">
  Applying refutation tests to the Lalonde and IHDP datasets
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/lalonde_pandas_api.html">
  Lalonde Pandas API Example
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy-conditional-treatment-effects.html">
  Conditional Average Treatment Effects (CATE) with DoWhy and EconML
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy_mediation_analysis.html">
  Mediation analysis with DoWhy: Direct and Indirect Effects
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy_demo_dummy_outcome_refuter.html">
  A Simple Example on Creating a Custom Refutation Using User-Defined Outcome Functions
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy_multiple_treatments.html">
  Estimating effect of multiple treatments
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../example_notebooks/dowhy_refuter_notebook.html">
  Iterating over multiple refutation tests
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../code_repo.html">
  Code repository &amp; Versions
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../dowhy.html">
  dowhy package
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <h1>Source code for dowhy.causal_model</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot; Module containing the main model class for the dowhy package.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="n">init_printing</span>

<span class="kn">import</span> <span class="nn">dowhy.causal_estimators</span> <span class="k">as</span> <span class="nn">causal_estimators</span>
<span class="kn">import</span> <span class="nn">dowhy.causal_refuters</span> <span class="k">as</span> <span class="nn">causal_refuters</span>
<span class="kn">import</span> <span class="nn">dowhy.utils.cli_helpers</span> <span class="k">as</span> <span class="nn">cli</span>
<span class="kn">from</span> <span class="nn">dowhy.causal_estimator</span> <span class="kn">import</span> <span class="n">CausalEstimate</span>
<span class="kn">from</span> <span class="nn">dowhy.causal_graph</span> <span class="kn">import</span> <span class="n">CausalGraph</span>
<span class="kn">from</span> <span class="nn">dowhy.causal_identifier</span> <span class="kn">import</span> <span class="n">CausalIdentifier</span>
<span class="kn">from</span> <span class="nn">dowhy.utils.api</span> <span class="kn">import</span> <span class="n">parse_state</span>

<span class="n">init_printing</span><span class="p">()</span>  <span class="c1"># To display symbolic math symbols</span>


<div class="viewcode-block" id="CausalModel"><a class="viewcode-back" href="../../dowhy.html#dowhy.causal_model.CausalModel">[docs]</a><span class="k">class</span> <span class="nc">CausalModel</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;Main class for storing the causal model state.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">treatment</span><span class="p">,</span> <span class="n">outcome</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">common_causes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">instruments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">effect_modifiers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">estimand_type</span><span class="o">=</span><span class="s2">&quot;nonparametric-ate&quot;</span><span class="p">,</span>
                 <span class="n">proceed_when_unidentifiable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">missing_nodes_as_confounders</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize data and create a causal graph instance.</span>

<span class="sd">        Assigns treatment and outcome variables.</span>
<span class="sd">        Also checks and finds the common causes and instruments for treatment</span>
<span class="sd">        and outcome.</span>

<span class="sd">        At least one of graph, common_causes or instruments must be provided.</span>

<span class="sd">        :param data: a pandas dataframe containing treatment, outcome and other</span>
<span class="sd">        variables.</span>
<span class="sd">        :param treatment: name of the treatment variable</span>
<span class="sd">        :param outcome: name of the outcome variable</span>
<span class="sd">        :param graph: path to DOT file containing a DAG or a string containing</span>
<span class="sd">        a DAG specification in DOT format</span>
<span class="sd">        :param common_causes: names of common causes of treatment and _outcome. Only used when graph is None.</span>
<span class="sd">        :param instruments: names of instrumental variables for the effect of</span>
<span class="sd">        treatment on outcome. Only used when graph is None.</span>
<span class="sd">        :param effect_modifiers: names of variables that can modify the treatment effect. If not provided, then the causal graph is used to find the effect modifiers. Estimators will return multiple different estimates based on each value of effect_modifiers.</span>
<span class="sd">        :param estimand_type: the type of estimand requested (currently only &quot;nonparametric-ate&quot; is supported). In the future, may support other specific parametric forms of identification.</span>
<span class="sd">        :param proceed_when_unidentifiable: does the identification proceed by ignoring potential unobserved confounders. Binary flag.</span>
<span class="sd">        :param missing_nodes_as_confounders: Binary flag indicating whether variables in the dataframe that are not included in the causal graph, should be  automatically included as confounder nodes.</span>
<span class="sd">        :param `**kwargs`: More optional parameters that can be passed to the causal model. Currently supported params: &quot;logging_level&quot; to indicate the level of logging needed. Possible values are logging.CRITICAL, logging.ERROR, logging.INFO, logging.WARNING,and logging.DEBUG. Default is logging.INFO.</span>
<span class="sd">        :returns: an instance of CausalModel class</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span> <span class="o">=</span> <span class="n">parse_state</span><span class="p">(</span><span class="n">treatment</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span> <span class="o">=</span> <span class="n">parse_state</span><span class="p">(</span><span class="n">outcome</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_effect_modifiers</span> <span class="o">=</span> <span class="n">parse_state</span><span class="p">(</span><span class="n">effect_modifiers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_estimand_type</span> <span class="o">=</span> <span class="n">estimand_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proceed_when_unidentifiable</span> <span class="o">=</span> <span class="n">proceed_when_unidentifiable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_missing_nodes_as_confounders</span> <span class="o">=</span> <span class="n">missing_nodes_as_confounders</span>
        <span class="k">if</span> <span class="s1">&#39;logging_level&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;logging_level&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

        <span class="c1"># TODO: move the logging level argument to a json file. Tue 20 Feb 2018 06:56:27 PM DST</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">graph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Causal Graph not provided. DoWhy will construct a graph based on data inputs.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_common_causes</span> <span class="o">=</span> <span class="n">parse_state</span><span class="p">(</span><span class="n">common_causes</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_instruments</span> <span class="o">=</span> <span class="n">parse_state</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">common_causes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">instruments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_graph</span> <span class="o">=</span> <span class="n">CausalGraph</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">,</span>
                    <span class="n">common_cause_names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_common_causes</span><span class="p">,</span>
                    <span class="n">instrument_names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_instruments</span><span class="p">,</span>
                    <span class="n">effect_modifier_names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_effect_modifiers</span><span class="p">,</span>
                    <span class="n">observed_node_names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">common_causes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_graph</span> <span class="o">=</span> <span class="n">CausalGraph</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">,</span>
                    <span class="n">common_cause_names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_common_causes</span><span class="p">,</span>
                    <span class="n">effect_modifier_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effect_modifiers</span><span class="p">,</span>
                    <span class="n">observed_node_names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">instruments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_graph</span> <span class="o">=</span> <span class="n">CausalGraph</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">,</span>
                    <span class="n">instrument_names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_instruments</span><span class="p">,</span>
                    <span class="n">effect_modifier_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effect_modifiers</span><span class="p">,</span>
                    <span class="n">observed_node_names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cli</span><span class="o">.</span><span class="n">query_yes_no</span><span class="p">(</span>
                    <span class="s2">&quot;WARN: Are you sure that there are no common causes of treatment and outcome?&quot;</span><span class="p">,</span>
                    <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
                <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_graph</span> <span class="o">=</span> <span class="n">CausalGraph</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">,</span>
                <span class="n">graph</span><span class="p">,</span>
                <span class="n">effect_modifier_names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_effect_modifiers</span><span class="p">,</span>
                <span class="n">observed_node_names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                <span class="n">missing_nodes_as_confounders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_missing_nodes_as_confounders</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_common_causes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_graph</span><span class="o">.</span><span class="n">get_common_causes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_instruments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_graph</span><span class="o">.</span><span class="n">get_instruments</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="p">,</span>
                                                            <span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">)</span>
            <span class="c1"># Sometimes, effect modifiers from the graph may not match those provided by the user.</span>
            <span class="c1"># (Because some effect modifiers may also be common causes)</span>
            <span class="c1"># In such cases, the user-provided modifiers are used.</span>
            <span class="c1"># If no effect modifiers are provided,  then the ones from the graph are used.</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effect_modifiers</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effect_modifiers</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_effect_modifiers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_graph</span><span class="o">.</span><span class="n">get_effect_modifiers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_other_variables</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>

<div class="viewcode-block" id="CausalModel.identify_effect"><a class="viewcode-back" href="../../dowhy.html#dowhy.causal_model.CausalModel.identify_effect">[docs]</a>    <span class="k">def</span> <span class="nf">identify_effect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">estimand_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">method_name</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span> <span class="n">proceed_when_unidentifiable</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Identify the causal effect to be estimated, using properties of the causal graph.</span>

<span class="sd">        :param proceed_when_unidentifiable: Binary flag indicating whether identification should proceed in the presence of (potential) unobserved confounders.</span>
<span class="sd">        :returns: a probability expression (estimand) for the causal effect if identified, else NULL</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">proceed_when_unidentifiable</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">proceed_when_unidentifiable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_proceed_when_unidentifiable</span>
        <span class="k">if</span> <span class="n">estimand_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">estimand_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_estimand_type</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span> <span class="o">=</span> <span class="n">CausalIdentifier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_graph</span><span class="p">,</span>
                                           <span class="n">estimand_type</span><span class="p">,</span>
                                           <span class="n">method_name</span><span class="p">,</span>
                                           <span class="n">proceed_when_unidentifiable</span><span class="o">=</span><span class="n">proceed_when_unidentifiable</span><span class="p">)</span>
        <span class="n">identified_estimand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="o">.</span><span class="n">identify_effect</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">identified_estimand</span></div>

<div class="viewcode-block" id="CausalModel.estimate_effect"><a class="viewcode-back" href="../../dowhy.html#dowhy.causal_model.CausalModel.estimate_effect">[docs]</a>    <span class="k">def</span> <span class="nf">estimate_effect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identified_estimand</span><span class="p">,</span> <span class="n">method_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">control_value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                        <span class="n">treatment_value</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="n">test_significance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">evaluate_effect_strength</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">confidence_intervals</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">target_units</span><span class="o">=</span><span class="s2">&quot;ate&quot;</span><span class="p">,</span> <span class="n">effect_modifiers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">method_params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Estimate the identified causal effect.</span>

<span class="sd">        Currently requires an explicit method name to be specified. Method names follow the convention of identification method followed by the specific estimation method: &quot;[backdoor/iv].estimation_method_name&quot;. Following methods are supported.</span>
<span class="sd">            * Propensity Score Matching: &quot;backdoor.propensity_score_matching&quot;</span>
<span class="sd">            * Propensity Score Stratification: &quot;backdoor.propensity_score_stratification&quot;</span>
<span class="sd">            * Propensity Score-based Inverse Weighting: &quot;backdoor.propensity_score_weighting&quot;</span>
<span class="sd">            * Linear Regression: &quot;backdoor.linear_regression&quot;</span>
<span class="sd">            * Generalized Linear Models (e.g., logistic regression): &quot;backdoor.generalized_linear_model&quot;</span>
<span class="sd">            * Instrumental Variables: &quot;iv.instrumental_variable&quot;</span>
<span class="sd">            * Regression Discontinuity: &quot;iv.regression_discontinuity&quot;</span>

<span class="sd">        In addition, you can directly call any of the EconML estimation methods. The convention is &quot;backdoor.econml.path-to-estimator-class&quot;. For example, for the double machine learning estimator (&quot;DMLCateEstimator&quot; class) that is located inside &quot;dml&quot; module of EconML, you can use the method name, &quot;backdoor.econml.dml.DMLCateEstimator&quot;. CausalML estimators can also be called. See `this demo notebook &lt;https://microsoft.github.io/dowhy/example_notebooks/dowhy-conditional-treatment-effects.html&gt;`_.</span>


<span class="sd">        :param identified_estimand: a probability expression</span>
<span class="sd">            that represents the effect to be estimated. Output of</span>
<span class="sd">            CausalModel.identify_effect method</span>
<span class="sd">        :param method_name: name of the estimation method to be used.</span>
<span class="sd">        :param control_value: Value of the treatment in the control group, for effect estimation.  If treatment is multi-variate, this can be a list.</span>
<span class="sd">        :param treatment_value: Value of the treatment in the treated group, for effect estimation. If treatment is multi-variate, this can be a list.</span>
<span class="sd">        :param test_significance: Binary flag on whether to additionally do a statistical signficance test for the estimate.</span>
<span class="sd">        :param evaluate_effect_strength: (Experimental) Binary flag on whether to estimate the relative strength of the treatment&#39;s effect. This measure can be used to compare different treatments for the same outcome (by running this method with different treatments sequentially).</span>
<span class="sd">        :param confidence_intervals: (Experimental) Binary flag indicating whether confidence intervals should be computed.</span>
<span class="sd">        :param target_units: (Experimental) The units for which the treatment effect should be estimated. This can be of three types. (1) a string for common specifications of target units (namely, &quot;ate&quot;, &quot;att&quot; and &quot;atc&quot;), (2) a lambda function that can be used as an index for the data (pandas DataFrame), or (3) a new DataFrame that contains values of the effect_modifiers and effect will be estimated only for this new data.</span>
<span class="sd">        :param effect_modifiers: Names of effect modifier variables can be (optionally) specified here too, since they do not affect identification. If None, the effect_modifiers from the CausalModel are used.</span>
<span class="sd">        :param method_params: Dictionary containing any method-specific parameters. These are passed directly to the estimating method. See the docs for each estimation method for allowed method-specific params.</span>

<span class="sd">        :returns: An instance of the CausalEstimate class, containing the causal effect estimate</span>
<span class="sd">            and other method-dependent information</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">effect_modifiers</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">effect_modifiers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effect_modifiers</span>

        <span class="k">if</span> <span class="n">method_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">#TODO add propensity score as default backdoor method, iv as default iv method, add an informational message to show which method has been selected.</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># TODO add dowhy as a prefix to all dowhy estimators</span>
            <span class="n">num_components</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">method_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">))</span>
            <span class="n">str_arr</span> <span class="o">=</span> <span class="n">method_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">identifier_name</span> <span class="o">=</span> <span class="n">str_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">estimator_name</span> <span class="o">=</span> <span class="n">str_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">identified_estimand</span><span class="o">.</span><span class="n">set_identifier_method</span><span class="p">(</span><span class="n">identifier_name</span><span class="p">)</span>
            <span class="c1"># This is done as all dowhy estimators have two parts and external ones have two or more parts</span>
            <span class="k">if</span> <span class="n">num_components</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">estimator_package</span> <span class="o">=</span>  <span class="n">estimator_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">estimator_package</span> <span class="o">==</span> <span class="s1">&#39;dowhy&#39;</span><span class="p">:</span> <span class="c1"># For updated dowhy methods</span>
                    <span class="n">estimator_method</span> <span class="o">=</span> <span class="n">estimator_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span><span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># discard dowhy from the full package name</span>
                    <span class="n">causal_estimator_class</span> <span class="o">=</span> <span class="n">causal_estimators</span><span class="o">.</span><span class="n">get_class_object</span><span class="p">(</span><span class="n">estimator_method</span> <span class="o">+</span> <span class="s2">&quot;_estimator&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">third_party_estimator_package</span> <span class="o">=</span> <span class="n">estimator_package</span>
                    <span class="n">causal_estimator_class</span> <span class="o">=</span> <span class="n">causal_estimators</span><span class="o">.</span><span class="n">get_class_object</span><span class="p">(</span><span class="n">third_party_estimator_package</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">method_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">method_params</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="c1"># Define the third-party estimation method to be used</span>
                    <span class="n">method_params</span><span class="p">[</span><span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">third_party_estimator_package</span> <span class="o">+</span> <span class="s2">&quot;_methodname&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">estimator_name</span>
            <span class="k">else</span><span class="p">:</span> <span class="c1"># For older dowhy methods</span>
                <span class="c1"># Process the dowhy estimators</span>
                <span class="n">causal_estimator_class</span> <span class="o">=</span> <span class="n">causal_estimators</span><span class="o">.</span><span class="n">get_class_object</span><span class="p">(</span><span class="n">estimator_name</span> <span class="o">+</span> <span class="s2">&quot;_estimator&quot;</span><span class="p">)</span>

        <span class="c1"># Check if estimator&#39;s target estimand is identified</span>
        <span class="k">if</span> <span class="n">identified_estimand</span><span class="o">.</span><span class="n">estimands</span><span class="p">[</span><span class="n">identifier_name</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No valid identified estimand available.&quot;</span><span class="p">)</span>
            <span class="n">estimate</span> <span class="o">=</span> <span class="n">CausalEstimate</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">causal_estimator</span> <span class="o">=</span> <span class="n">causal_estimator_class</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">,</span>
                <span class="n">identified_estimand</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">,</span> <span class="c1">#names of treatment and outcome</span>
                <span class="n">control_value</span> <span class="o">=</span> <span class="n">control_value</span><span class="p">,</span>
                <span class="n">treatment_value</span> <span class="o">=</span> <span class="n">treatment_value</span><span class="p">,</span>
                <span class="n">test_significance</span><span class="o">=</span><span class="n">test_significance</span><span class="p">,</span>
                <span class="n">evaluate_effect_strength</span><span class="o">=</span><span class="n">evaluate_effect_strength</span><span class="p">,</span>
                <span class="n">confidence_intervals</span> <span class="o">=</span> <span class="n">confidence_intervals</span><span class="p">,</span>
                <span class="n">target_units</span> <span class="o">=</span> <span class="n">target_units</span><span class="p">,</span>
                <span class="n">effect_modifiers</span> <span class="o">=</span> <span class="n">effect_modifiers</span><span class="p">,</span>
                <span class="n">params</span><span class="o">=</span><span class="n">method_params</span>
            <span class="p">)</span>
            <span class="n">estimate</span> <span class="o">=</span> <span class="n">causal_estimator</span><span class="o">.</span><span class="n">estimate_effect</span><span class="p">()</span>
            <span class="c1"># Store parameters inside estimate object for refutation methods</span>
            <span class="n">estimate</span><span class="o">.</span><span class="n">add_params</span><span class="p">(</span>
                <span class="n">estimand_type</span><span class="o">=</span><span class="n">identified_estimand</span><span class="o">.</span><span class="n">estimand_type</span><span class="p">,</span>
                <span class="n">estimator_class</span><span class="o">=</span><span class="n">causal_estimator_class</span><span class="p">,</span>
                <span class="n">test_significance</span><span class="o">=</span><span class="n">test_significance</span><span class="p">,</span>
                <span class="n">evaluate_effect_strength</span><span class="o">=</span><span class="n">evaluate_effect_strength</span><span class="p">,</span>
                <span class="n">confidence_intervals</span><span class="o">=</span><span class="n">confidence_intervals</span><span class="p">,</span>
                <span class="n">target_units</span><span class="o">=</span><span class="n">target_units</span><span class="p">,</span>
                <span class="n">effect_modifiers</span><span class="o">=</span><span class="n">effect_modifiers</span><span class="p">,</span>
                <span class="n">method_params</span><span class="o">=</span><span class="n">method_params</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">estimate</span></div>

<div class="viewcode-block" id="CausalModel.do"><a class="viewcode-back" href="../../dowhy.html#dowhy.causal_model.CausalModel.do">[docs]</a>    <span class="k">def</span> <span class="nf">do</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">identified_estimand</span><span class="p">,</span> <span class="n">method_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="n">method_params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Do operator for estimating values of the outcome after intervening on treatment.</span>


<span class="sd">        :param identified_estimand: a probability expression</span>
<span class="sd">            that represents the effect to be estimated. Output of</span>
<span class="sd">            CausalModel.identify_effect method</span>
<span class="sd">        :param method_name: any of the estimation method to be used. See docs for estimate_effect method for a list of supported estimation methods.</span>
<span class="sd">        :param method_params: Dictionary containing any method-specific parameters. These are passed directly to the estimating method.</span>

<span class="sd">        :returns: an instance of the CausalEstimate class, containing the causal effect estimate</span>
<span class="sd">            and other method-dependent information</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">method_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">str_arr</span> <span class="o">=</span> <span class="n">method_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">str_arr</span><span class="p">)</span>
            <span class="n">identifier_name</span> <span class="o">=</span> <span class="n">str_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">estimator_name</span> <span class="o">=</span> <span class="n">str_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">identified_estimand</span><span class="o">.</span><span class="n">set_identifier_method</span><span class="p">(</span><span class="n">identifier_name</span><span class="p">)</span>
            <span class="n">causal_estimator_class</span> <span class="o">=</span> <span class="n">causal_estimators</span><span class="o">.</span><span class="n">get_class_object</span><span class="p">(</span><span class="n">estimator_name</span> <span class="o">+</span> <span class="s2">&quot;_estimator&quot;</span><span class="p">)</span>

        <span class="c1"># Check if estimator&#39;s target estimand is identified</span>
        <span class="k">if</span> <span class="n">identified_estimand</span><span class="o">.</span><span class="n">estimands</span><span class="p">[</span><span class="n">identifier_name</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No valid identified estimand for using instrumental variables method&quot;</span><span class="p">)</span>
            <span class="n">estimate</span> <span class="o">=</span> <span class="n">CausalEstimate</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">causal_estimator</span> <span class="o">=</span> <span class="n">causal_estimator_class</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">,</span>
                <span class="n">identified_estimand</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">,</span>
                <span class="n">test_significance</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">params</span><span class="o">=</span><span class="n">method_params</span>
            <span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">estimate</span> <span class="o">=</span> <span class="n">causal_estimator</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Do Operation not implemented or not supported for this estimator.&#39;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span>
        <span class="k">return</span> <span class="n">estimate</span></div>

<div class="viewcode-block" id="CausalModel.refute_estimate"><a class="viewcode-back" href="../../dowhy.html#dowhy.causal_model.CausalModel.refute_estimate">[docs]</a>    <span class="k">def</span> <span class="nf">refute_estimate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">estimand</span><span class="p">,</span> <span class="n">estimate</span><span class="p">,</span> <span class="n">method_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Refute an estimated causal effect.</span>

<span class="sd">        If method_name is provided, uses the provided method. In the future, we may support automatic selection of suitable refutation tests. Following refutation methods are supported.</span>
<span class="sd">            * Adding a randomly-generated confounder: &quot;random_common_cause&quot;</span>
<span class="sd">            * Adding a confounder that is associated with both treatment and outcome: &quot;add_unobserved_common_cause&quot;</span>
<span class="sd">            * Replacing the treatment with a placebo (random) variable): &quot;placebo_treatment_refuter&quot;</span>
<span class="sd">            * Removing a random subset of the data: &quot;data_subset_refuter&quot;</span>

<span class="sd">        :param estimand: target estimand, an instance of the IdentifiedEstimand class (typically, the output of identify_effect)</span>
<span class="sd">        :param estimate: estimate to be refuted, an instance of the CausalEstimate class (typically, the output of estimate_effect)</span>
<span class="sd">        :param method_name: name of the refutation method</span>
<span class="sd">        :param kwargs:  (optional) additional arguments that are passed directly to the refutation method. Can specify a random seed here to ensure reproducible results (&#39;random_seed&#39; parameter). For method-specific parameters, consult the documentation for the specific method. All refutation methods are in the causal_refuters subpackage.</span>

<span class="sd">        :returns: an instance of the RefuteResult class</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">method_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">refuter_class</span> <span class="o">=</span> <span class="n">causal_refuters</span><span class="o">.</span><span class="n">get_class_object</span><span class="p">(</span><span class="n">method_name</span><span class="p">)</span>

        <span class="n">refuter</span> <span class="o">=</span> <span class="n">refuter_class</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">,</span>
            <span class="n">identified_estimand</span><span class="o">=</span><span class="n">estimand</span><span class="p">,</span>
            <span class="n">estimate</span><span class="o">=</span><span class="n">estimate</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">refuter</span><span class="o">.</span><span class="n">refute_estimate</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="CausalModel.view_model"><a class="viewcode-back" href="../../dowhy.html#dowhy.causal_model.CausalModel.view_model">[docs]</a>    <span class="k">def</span> <span class="nf">view_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;dot&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;View the causal DAG.</span>

<span class="sd">        :param layout: string specifying the layout of the graph.</span>

<span class="sd">        :returns: a visualization of the graph</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_graph</span><span class="o">.</span><span class="n">view_graph</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span></div>

<div class="viewcode-block" id="CausalModel.interpret"><a class="viewcode-back" href="../../dowhy.html#dowhy.causal_model.CausalModel.interpret">[docs]</a>    <span class="k">def</span> <span class="nf">interpret</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Interpret the causal model.</span>

<span class="sd">        :param method_name: method used for interpreting the model. If None,</span>
<span class="sd">                            then default interpreter is chosen that describes the model summary and shows the associated causal graph.</span>
<span class="sd">        :param kwargs:: Optional parameters that are directly passed to the interpreter method.</span>

<span class="sd">        :returns: None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">method_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">print_to_stdout</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view_model</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="n">method_name_arr</span> <span class="o">=</span> <span class="n">parse_state</span><span class="p">(</span><span class="n">method_name</span><span class="p">)</span>
        <span class="kn">import</span> <span class="nn">dowhy.interpreters</span> <span class="k">as</span> <span class="nn">interpreters</span>
        <span class="k">for</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">method_name_arr</span><span class="p">:</span>
            <span class="n">interpreter</span> <span class="o">=</span> <span class="n">interpreters</span><span class="o">.</span><span class="n">get_class_object</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
            <span class="n">interpreter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">interpret</span><span class="p">()</span></div>

<div class="viewcode-block" id="CausalModel.summary"><a class="viewcode-back" href="../../dowhy.html#dowhy.causal_model.CausalModel.summary">[docs]</a>    <span class="k">def</span> <span class="nf">summary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">print_to_stdout</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Print a text summary of the model.</span>

<span class="sd">        :returns: a string containining the summary</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">summary_text</span> <span class="o">=</span> <span class="s2">&quot;Model to find the causal effect of treatment </span><span class="si">{0}</span><span class="s2"> on outcome </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">summary_text</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">print_to_stdout</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">summary_text</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">summary_text</span></div></div>


</pre></div>

              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, PyWhy contributors.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.0.2.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>