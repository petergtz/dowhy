<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B139P18WHM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B139P18WHM');
</script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DoWhy | An end-to-end library for causal inference &mdash; DoWhy  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial on Causal Inference and its Connections to Machine Learning (Using DoWhy+EconML)" href="example_notebooks/tutorial-causalinference-machinelearning-using-dowhy-econml.html" />
    <link rel="prev" title="DoWhy | An end-to-end library for causal inference" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> DoWhy
          </a>
              <div class="version">
                v0.6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introducing DoWhy</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">DoWhy | An end-to-end library for causal inference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-need-for-causal-inference">The need for causal inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sample-causal-inference-analysis-in-dowhy">Sample causal inference analysis in DoWhy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-high-level-pandas-api">A high-level Pandas API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#graphical-models-and-potential-outcomes-best-of-both-worlds">Graphical Models and Potential Outcomes: Best of both worlds</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-unifying-language-for-causal-inference">A unifying language for causal inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-differences-compared-to-available-causal-inference-software">Key differences compared to available causal inference software</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#four-steps-of-causal-inference">Four steps of causal inference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#i-model-a-causal-problem">I. Model a causal problem</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supported-formats-for-specifying-causal-assumptions">Supported formats for specifying causal assumptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ii-identify-a-target-estimand-under-the-model">II. Identify a target estimand under the model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supported-identification-criteria">Supported identification criteria</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#iii-estimate-causal-effect-based-on-the-identified-estimand">III. Estimate causal effect based on the identified estimand</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supported-estimation-methods">Supported estimation methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-econml-and-causalml-estimation-methods-in-dowhy">Using EconML and CausalML estimation methods in DoWhy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#iv-refute-the-obtained-estimate">IV. Refute the obtained estimate</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supported-refutation-methods">Supported refutation methods</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#citing-this-package">Citing this package</a></li>
<li class="toctree-l1"><a class="reference internal" href="#roadmap">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="#contributing">Contributing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Quick-Start Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/tutorial-causalinference-machinelearning-using-dowhy-econml.html">Tutorial on Causal Inference and its Connections to Machine Learning (Using DoWhy+EconML)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Starter Notebooks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy_simple_example.html">Getting started with DoWhy: A simple example</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy_confounder_example.html">Confounding Example: Finding causal effects from observed data</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy_estimation_methods.html">DoWhy: Different estimation methods for causal inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy-simple-iv-example.html">Simple example on using Instrumental Variables method for estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/load_graph_example.html">Different ways to load an input graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy_causal_api.html">Demo for the DoWhy causal API</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/do_sampler_demo.html">Do-sampler Introduction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Case Study Notebooks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/DoWhy-The%20Causal%20Story%20Behind%20Hotel%20Booking%20Cancellations.html">DoWhy-The Causal Story Behind Hotel Booking Cancellations</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy_example_effect_of_memberrewards_program.html">Estimating the effect of a Member Rewards program</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy_ihdp_data_example.html">DoWhy example on ihdp (Infant Health and Development Program) dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy_lalonde_example.html">DoWhy example on the Lalonde dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy_refutation_testing.html">Applying refutation tests to the Lalonde and IHDP datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/lalonde_pandas_api.html">Lalonde Pandas API Example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Notebooks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy-conditional-treatment-effects.html">Conditional Average Treatment Effects (CATE) with DoWhy and EconML</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy_mediation_analysis.html">Mediation analysis with DoWhy: Direct and Indirect Effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy_demo_dummy_outcome_refuter.html">A Simple Example on Creating a Custom Refutation Using User-Defined Outcome Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy_multiple_treatments.html">Estimating effect of multiple treatments</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks/dowhy_refuter_notebook.html">Iterating over multiple refutation tests</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Package</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="code_repo.html">Code repository &amp; Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="dowhy.html">dowhy package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DoWhy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>DoWhy | An end-to-end library for causal inference</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/readme.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<p><a class="reference external" href="https://github.com/microsoft/dowhy/actions"><img alt="BuildStatus" src="https://github.com/microsoft/dowhy/workflows/Python%20package/badge.svg" /></a> <a class="reference external" href="https://pypi.org/project/dowhy/"><img alt="PyPiVersion" src="https://img.shields.io/pypi/v/dowhy.svg" /></a> <a class="reference external" href="https://pypi.org/project/dowhy/"><img alt="PythonSupport" src="https://img.shields.io/pypi/pyversions/dowhy.svg" /></a></p>
<section id="dowhy-an-end-to-end-library-for-causal-inference">
<h1><a class="toc-backref" href="#id4">DoWhy | An end-to-end library for causal inference</a><a class="headerlink" href="#dowhy-an-end-to-end-library-for-causal-inference" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="http://www.amitsharma.in">Amit Sharma</a>,
<a class="reference external" href="http://www.kiciman.org">Emre Kiciman</a></p>
<blockquote>
<div><p>Introducing DoWhy and the 4 steps of causal inference | <a class="reference external" href="https://www.microsoft.com/en-us/research/blog/dowhy-a-library-for-causal-inference/">Microsoft Research Blog</a> | <a class="reference external" href="https://note.microsoft.com/MSR-Webinar-DoWhy-Library-Registration-On-Demand.html">Video Tutorial</a> | <a class="reference external" href="https://arxiv.org/abs/2011.04216">Arxiv Paper</a> | <a class="reference external" href="https://www2.slideshare.net/AmitSharma315/dowhy-an-endtoend-library-for-causal-inference">Slides</a></p>
<p>Read the <a class="reference external" href="https://microsoft.github.io/dowhy/">docs</a> | Try it online! <a class="reference external" href="https://mybinder.org/v2/gh/microsoft/dowhy/master?filepath=docs%2Fsource%2F"><img alt="Binder" src="https://mybinder.org/badge_logo.svg" /></a></p>
</div></blockquote>
<p><strong>Case Studies using DoWhy</strong>: <a class="reference external" href="https://towardsdatascience.com/beyond-predictive-models-the-causal-story-behind-hotel-booking-cancellations-d29e8558cbaf">Hotel booking cancellations</a> | <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy_example_effect_of_memberrewards_program.ipynb">Effect of customer loyalty programs</a> | <a class="reference external" href="https://medium.com/&#64;akelleh/introducing-the-do-sampler-for-causal-inference-a3296ea9e78d">Optimizing article headlines</a> | <a class="reference external" href="https://towardsdatascience.com/implementing-causal-inference-a-key-step-towards-agi-de2cde8ea599">Effect of home visits on infant health (IHDP)</a></p>
<img alt="https://raw.githubusercontent.com/microsoft/dowhy/master/docs/images/dowhy-schematic.png" src="https://raw.githubusercontent.com/microsoft/dowhy/master/docs/images/dowhy-schematic.png" />
<p>As computing systems are more frequently and more actively intervening in societally critical domains such as healthcare, education, and governance, it is critical to correctly predict and understand the causal effects of these interventions. Without an A/B test, conventional machine learning methods, built on pattern recognition and correlational analyses, are insufficient for decision-making.</p>
<p>Much like machine learning libraries have done for prediction, <strong>“DoWhy” is a Python library that aims to spark causal thinking and analysis</strong>. DoWhy provides a principled four-step interface for causal inference that focuses on explicitly modeling causal assumptions and validating them as much as possible. The key feature of DoWhy is its state-of-the-art refutation API that can automatically test causal assumptions for any estimation method, thus making inference more robust and accessible to non-experts. DoWhy supports estimation of the average causal effect for backdoor, frontdoor, instrumental variable and other identification methods, and estimation of the conditional effect (CATE) through an integration with the EconML library.</p>
<p>For a quick introduction to causal inference, check out <a class="reference external" href="https://github.com/amit-sharma/causal-inference-tutorial/">amit-sharma/causal-inference-tutorial</a>. We also gave a more comprehensive tutorial at the ACM Knowledge Discovery and Data Mining (<a class="reference external" href="http://www.kdd.org/kdd2018/">KDD 2018</a>) conference: <a class="reference external" href="http://causalinference.gitlab.io/kdd-tutorial/">causalinference.gitlab.io/kdd-tutorial</a>. For an introduction to the four steps of causal inference and its implications for machine learning, you can access this video tutorial from Microsoft Research: <a class="reference external" href="https://note.microsoft.com/MSR-Webinar-DoWhy-Library-Registration-On-Demand.html">DoWhy Webinar</a>.</p>
<p>Documentation for DoWhy is available at <a class="reference external" href="https://microsoft.github.io/dowhy/">microsoft.github.io/dowhy</a>.</p>
<div class="contents topic" id="contents">
<p class="topic-title"><strong>Contents</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#dowhy-an-end-to-end-library-for-causal-inference" id="id4">DoWhy | An end-to-end library for causal inference</a></p>
<ul>
<li><p><a class="reference internal" href="#the-need-for-causal-inference" id="id5">The need for causal inference</a></p></li>
<li><p><a class="reference internal" href="#installation" id="id6">Installation</a></p></li>
<li><p><a class="reference internal" href="#sample-causal-inference-analysis-in-dowhy" id="id7">Sample causal inference analysis in DoWhy</a></p></li>
<li><p><a class="reference internal" href="#a-high-level-pandas-api" id="id8">A high-level Pandas API</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#graphical-models-and-potential-outcomes-best-of-both-worlds" id="id9">Graphical Models and Potential Outcomes: Best of both worlds</a></p>
<ul>
<li><p><a class="reference internal" href="#a-unifying-language-for-causal-inference" id="id10">A unifying language for causal inference</a></p></li>
<li><p><a class="reference internal" href="#key-differences-compared-to-available-causal-inference-software" id="id11">Key differences compared to available causal inference software</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#four-steps-of-causal-inference" id="id12">Four steps of causal inference</a></p>
<ul>
<li><p><a class="reference internal" href="#i-model-a-causal-problem" id="id13">I. Model a causal problem</a></p>
<ul>
<li><p><a class="reference internal" href="#supported-formats-for-specifying-causal-assumptions" id="id14">Supported formats for specifying causal assumptions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#ii-identify-a-target-estimand-under-the-model" id="id15">II. Identify a target estimand under the model</a></p>
<ul>
<li><p><a class="reference internal" href="#supported-identification-criteria" id="id16">Supported identification criteria</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#iii-estimate-causal-effect-based-on-the-identified-estimand" id="id17">III. Estimate causal effect based on the identified estimand</a></p>
<ul>
<li><p><a class="reference internal" href="#supported-estimation-methods" id="id18">Supported estimation methods</a></p></li>
<li><p><a class="reference internal" href="#using-econml-and-causalml-estimation-methods-in-dowhy" id="id19">Using EconML and CausalML estimation methods in DoWhy</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#iv-refute-the-obtained-estimate" id="id20">IV. Refute the obtained estimate</a></p>
<ul>
<li><p><a class="reference internal" href="#supported-refutation-methods" id="id21">Supported refutation methods</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#citing-this-package" id="id22">Citing this package</a></p></li>
<li><p><a class="reference internal" href="#roadmap" id="id23">Roadmap</a></p></li>
<li><p><a class="reference internal" href="#contributing" id="id24">Contributing</a></p></li>
</ul>
</div>
<section id="the-need-for-causal-inference">
<h2><a class="toc-backref" href="#id5">The need for causal inference</a><a class="headerlink" href="#the-need-for-causal-inference" title="Permalink to this heading"></a></h2>
<p>Predictive models uncover patterns that connect the inputs and outcome in observed data. To intervene, however, we need to estimate the effect of changing an input from its current value, for which no data exists. Such questions, involving estimating a <em>counterfactual</em>, are common in decision-making scenarios.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Will it work?</dt><dd><ul>
<li><p>Does a proposed change to a system improve people’s outcomes?</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Why did it work?</dt><dd><ul>
<li><p>What led to a change in a system’s outcome?</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>What should we do?</dt><dd><ul>
<li><p>What changes to a system are likely to improve outcomes for people?</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>What are the overall effects?</dt><dd><ul>
<li><p>How does the system interact with human behavior?</p></li>
<li><p>What is the effect of a system’s recommendations on people’s activity?</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Answering these questions requires causal reasoning. While many methods exist
for causal inference, it is hard to compare their assumptions and robustness of results. DoWhy makes three contributions,</p>
<ol class="arabic simple">
<li><p>Provides a principled way of modeling a given problem as a causal graph so
that all assumptions are explicit.</p></li>
<li><p>Provides a unified interface for many popular causal inference methods, combining the two major frameworks of graphical models and potential outcomes.</p></li>
<li><p>Automatically tests for the validity of assumptions if possible and assesses
the robustness of the estimate to violations.</p></li>
</ol>
<p>To see DoWhy in action, check out how it can be applied to estimate the effect
of a subscription or rewards program for customers [<a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy_example_effect_of_memberrewards_program.ipynb">Rewards notebook</a>] and for implementing and evaluating causal inference methods on benchmark datasets like the <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy_ihdp_data_example.ipynb">Infant Health and Development Program (IHDP)</a> dataset, <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy_twins_example.ipynb">Infant Mortality (Twins)</a> dataset, and the <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy_lalonde_example.ipynb">Lalonde Jobs</a> dataset.</p>
</section>
<section id="installation">
<h2><a class="toc-backref" href="#id6">Installation</a><a class="headerlink" href="#installation" title="Permalink to this heading"></a></h2>
<p>DoWhy support Python 3.6+. To install, you can use pip or conda.</p>
<p><strong>Latest Release</strong></p>
<p>Install the latest <a class="reference external" href="https://pypi.org/project/dowhy/">release</a> using pip.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip install dowhy
</pre></div>
</div>
<p>Install the latest <a class="reference external" href="https://anaconda.org/conda-forge/dowhy">release</a> using conda.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda install -c conda-forge dowhy
</pre></div>
</div>
<p>If you face “Solving environment” problems with conda, then try <code class="code docutils literal notranslate"><span class="pre">conda</span> <span class="pre">update</span> <span class="pre">--all</span></code> and then install dowhy. If that does not work, then use <code class="code docutils literal notranslate"><span class="pre">conda</span> <span class="pre">config</span> <span class="pre">--set</span> <span class="pre">channel_priority</span> <span class="pre">false</span></code> and try to install again. If the problem persists, please add your issue <a class="reference external" href="https://github.com/microsoft/dowhy/issues/197">here</a>.</p>
<p><strong>Development Version</strong></p>
<p>If you prefer the latest dev version, clone this repository and run the following command from the top-most folder of
the repository.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip install -e .
</pre></div>
</div>
<p><strong>Requirements</strong></p>
<p>DoWhy requires the following packages:</p>
<ul class="simple">
<li><p>numpy</p></li>
<li><p>scipy</p></li>
<li><p>scikit-learn</p></li>
<li><p>pandas</p></li>
<li><p>networkx  (for analyzing causal graphs)</p></li>
<li><p>matplotlib (for general plotting)</p></li>
<li><p>sympy (for rendering symbolic expressions)</p></li>
</ul>
<p>If you face any problems, try installing dependencies manually.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip install -r requirements.txt
</pre></div>
</div>
<p>Optionally, if you wish to input graphs in the dot format, then install pydot (or pygraphviz).</p>
<p>For better-looking graphs, you can optionally install pygraphviz. To proceed,
first install graphviz and then pygraphviz (on Ubuntu and Ubuntu WSL).</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo apt install graphviz libgraphviz-dev graphviz-dev pkg-config
<span class="c1">## from https://github.com/pygraphviz/pygraphviz/issues/71</span>
pip install pygraphviz --install-option<span class="o">=</span><span class="s2">&quot;--include-path=/usr/include/graphviz&quot;</span> <span class="se">\</span>
--install-option<span class="o">=</span><span class="s2">&quot;--library-path=/usr/lib/graphviz/&quot;</span>
</pre></div>
</div>
<p>Keep in mind that pygraphviz installation can be problematic on the latest versions of Python3. Tested to work with Python 3.5.</p>
</section>
<section id="sample-causal-inference-analysis-in-dowhy">
<h2><a class="toc-backref" href="#id7">Sample causal inference analysis in DoWhy</a><a class="headerlink" href="#sample-causal-inference-analysis-in-dowhy" title="Permalink to this heading"></a></h2>
<p>Most DoWhy
analyses for causal inference take 4 lines to write, assuming a
pandas dataframe df that contains the data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dowhy</span> <span class="kn">import</span> <span class="n">CausalModel</span>
<span class="kn">import</span> <span class="nn">dowhy.datasets</span>

<span class="c1"># Load some sample data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">dowhy</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">linear_dataset</span><span class="p">(</span>
    <span class="n">beta</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">num_common_causes</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">num_instruments</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">num_samples</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span>
    <span class="n">treatment_is_binary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>DoWhy supports two formats for providing the causal graph: <a class="reference external" href="https://github.com/GunterMueller/UNI_PASSAU_FMI_Graph_Drawing">gml</a> (preferred) and <a class="reference external" href="http://www.graphviz.org/documentation/">dot</a>. After loading in the data, we use the four main operations in DoWhy: <em>model</em>,
<em>estimate</em>, <em>identify</em> and <em>refute</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># I. Create a causal model from the data and given graph.</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">CausalModel</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;df&quot;</span><span class="p">],</span>
    <span class="n">treatment</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;treatment_name&quot;</span><span class="p">],</span>
    <span class="n">outcome</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;outcome_name&quot;</span><span class="p">],</span>
    <span class="n">graph</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;gml_graph&quot;</span><span class="p">])</span>

<span class="c1"># II. Identify causal effect and return target estimands</span>
<span class="n">identified_estimand</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">identify_effect</span><span class="p">()</span>

<span class="c1"># III. Estimate the target estimand using a statistical method.</span>
<span class="n">estimate</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">estimate_effect</span><span class="p">(</span><span class="n">identified_estimand</span><span class="p">,</span>
                                 <span class="n">method_name</span><span class="o">=</span><span class="s2">&quot;backdoor.propensity_score_matching&quot;</span><span class="p">)</span>

<span class="c1"># IV. Refute the obtained estimate using multiple robustness checks.</span>
<span class="n">refute_results</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">refute_estimate</span><span class="p">(</span><span class="n">identified_estimand</span><span class="p">,</span> <span class="n">estimate</span><span class="p">,</span>
                                       <span class="n">method_name</span><span class="o">=</span><span class="s2">&quot;random_common_cause&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>DoWhy stresses on the interpretability of its output. At any point in the analysis,
you can inspect the untested assumptions, identified estimands (if any) and the
estimate (if any). Here’s a sample output of the linear regression estimator.</p>
<img alt="https://raw.githubusercontent.com/microsoft/dowhy/master/docs/images/regression_output.png" src="https://raw.githubusercontent.com/microsoft/dowhy/master/docs/images/regression_output.png" />
<p>For a full code example, check out the <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy_simple_example.ipynb">Getting Started with DoWhy</a> notebook. You can also use Conditional Average Treatment Effect (CATE) estimation methods from other libraries such as EconML and CausalML, as shown in the <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy-conditional-treatment-effects.ipynb">Conditional Treatment Effects</a> notebook. For more examples of using DoWhy, check out the Jupyter notebooks in <a class="reference external" href="https://github.com/microsoft/dowhy/tree/master/docs/source/example_notebooks/">docs/source/example_notebooks</a> or try them online at <a class="reference external" href="https://mybinder.org/v2/gh/microsoft/dowhy/master?filepath=docs%2Fsource%2F">Binder</a>.</p>
</section>
<section id="a-high-level-pandas-api">
<h2><a class="toc-backref" href="#id8">A high-level Pandas API</a><a class="headerlink" href="#a-high-level-pandas-api" title="Permalink to this heading"></a></h2>
<p>We’ve made an even simpler API for dowhy which is a light layer on top of the standard one. The goal is to make causal analysis much more like regular exploratory analysis. To use this API, simply
import <code class="code docutils literal notranslate"><span class="pre">dowhy.api</span></code>. This will magically add the <code class="code docutils literal notranslate"><span class="pre">causal</span></code> namespace to your
<code class="code docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> s. Then,
you can use the namespace as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dowhy.api</span>
<span class="kn">import</span> <span class="nn">dowhy.datasets</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">dowhy</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">linear_dataset</span><span class="p">(</span><span class="n">beta</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">num_common_causes</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">num_instruments</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">num_samples</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">treatment_is_binary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># data[&#39;df&#39;] is just a regular pandas.DataFrame</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;df&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">causal</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;v0&#39;</span><span class="p">,</span> <span class="c1"># name of treatment variable</span>
                     <span class="n">variable_types</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;v0&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;W0&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">},</span>
                     <span class="n">outcome</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span>
                     <span class="n">common_causes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;W0&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;v0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="https://raw.githubusercontent.com/microsoft/dowhy/master/docs/images/do_barplot.png" src="https://raw.githubusercontent.com/microsoft/dowhy/master/docs/images/do_barplot.png" />
<p>For some methods, the <code class="code docutils literal notranslate"><span class="pre">variable_types</span></code> field must be specified. It should be a <code class="code docutils literal notranslate"><span class="pre">dict</span></code>, where the keys are
variable names, and values are ‘o’ for ordered discrete, ‘u’ for un-ordered discrete, ‘d’ for discrete, or ‘c’
for continuous.</p>
<p><strong>Note:If the</strong> <code class="code docutils literal notranslate"><span class="pre">variable_types</span></code> <strong>is not specified we make use of the following implicit conversions:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="o">-&gt;</span> <span class="s1">&#39;c&#39;</span>
<span class="nb">float</span> <span class="o">-&gt;</span> <span class="s1">&#39;c&#39;</span>
<span class="n">binary</span> <span class="o">-&gt;</span> <span class="s1">&#39;b&#39;</span>
<span class="n">category</span> <span class="o">-&gt;</span> <span class="s1">&#39;d&#39;</span>
</pre></div>
</div>
<p><strong>Currently we have not added support for timestamps.</strong></p>
<p>The <code class="code docutils literal notranslate"><span class="pre">do</span></code> method in the causal namespace generates a random sample from $P(outcome|do(X=x))$ of the
same length as your data set, and returns this outcome as a new <code class="code docutils literal notranslate"><span class="pre">DataFrame</span></code>. You can continue to perform
the usual <code class="code docutils literal notranslate"><span class="pre">DataFrame</span></code> operations with this sample, and so you can compute statistics and create plots
for causal outcomes!</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">do</span></code> method is built on top of the lower-level <code class="code docutils literal notranslate"><span class="pre">dowhy</span></code> objects, so can still take a graph and perform
identification automatically when you provide a graph instead of <code class="code docutils literal notranslate"><span class="pre">common_causes</span></code>.</p>
<p>For more details, check out the <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy_causal_api.ipynb">Pandas API</a> notebook or the <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/do_sampler_demo.ipynb">Do Sampler</a>
notebook.</p>
</section>
</section>
<section id="graphical-models-and-potential-outcomes-best-of-both-worlds">
<h1><a class="toc-backref" href="#id9">Graphical Models and Potential Outcomes: Best of both worlds</a><a class="headerlink" href="#graphical-models-and-potential-outcomes-best-of-both-worlds" title="Permalink to this heading"></a></h1>
<p>DoWhy builds on two of the most powerful frameworks for causal inference:
graphical models and potential outcomes. It uses graph-based criteria and
do-calculus for modeling assumptions and identifying a non-parametric causal effect.
For estimation, it switches to methods based primarily on potential outcomes.</p>
<section id="a-unifying-language-for-causal-inference">
<h2><a class="toc-backref" href="#id10">A unifying language for causal inference</a><a class="headerlink" href="#a-unifying-language-for-causal-inference" title="Permalink to this heading"></a></h2>
<p>DoWhy is based on a simple unifying language for causal inference. Causal
inference may seem tricky, but almost all methods follow four key steps:</p>
<ol class="arabic simple">
<li><p>Model a causal inference problem using assumptions.</p></li>
<li><p>Identify an expression for the causal effect under these assumptions (“causal estimand”).</p></li>
<li><p>Estimate the expression using statistical methods such as matching or instrumental variables.</p></li>
<li><p>Finally, verify the validity of the estimate using a variety of robustness checks.</p></li>
</ol>
<p>This workflow can be captured by four key verbs in DoWhy:</p>
<ul class="simple">
<li><p>model</p></li>
<li><p>identify</p></li>
<li><p>estimate</p></li>
<li><p>refute</p></li>
</ul>
<p>Using these verbs, DoWhy implements a causal inference engine that can support
a variety of methods. <em>model</em> encodes prior knowledge as a formal causal graph, <em>identify</em> uses
graph-based methods to identify the causal effect, <em>estimate</em> uses
statistical methods for estimating the identified estimand, and finally <em>refute</em>
tries to refute the obtained estimate by testing robustness to assumptions.</p>
</section>
<section id="key-differences-compared-to-available-causal-inference-software">
<h2><a class="toc-backref" href="#id11">Key differences compared to available causal inference software</a><a class="headerlink" href="#key-differences-compared-to-available-causal-inference-software" title="Permalink to this heading"></a></h2>
<p>DoWhy brings three key differences compared to available software for causal inference:</p>
<dl>
<dt><strong>Explicit identifying assumptions</strong></dt><dd><p>Assumptions are first-class citizens in DoWhy.</p>
<p>Each analysis starts with a
building a causal model. The assumptions can be viewed graphically or in terms
of conditional independence statements. Wherever possible, DoWhy can also
automatically test for stated assumptions using observed data.</p>
</dd>
<dt><strong>Separation between identification and estimation</strong></dt><dd><p>Identification is the causal problem. Estimation is simply a statistical problem.</p>
<p>DoWhy
respects this boundary and treats them separately. This focuses the causal
inference effort on identification, and frees up estimation using any
available statistical estimator for a target estimand. In addition, multiple
estimation methods can be used for a single identified_estimand and
vice-versa.</p>
</dd>
<dt><strong>Automated robustness checks</strong></dt><dd><p>What happens when key identifying assumptions may not be satisfied?</p>
<p>The most critical, and often skipped, part of causal analysis is checking the
robustness of an estimate to unverified assumptions. DoWhy makes it easy to
automatically run sensitivity and robustness checks on the obtained estimate.</p>
</dd>
</dl>
<p>Finally, DoWhy is easily extensible, allowing other implementations of the
four verbs to co-exist (e.g., we support implementations of the <em>estimation</em> verb from
EconML and CausalML libraries). The four verbs are mutually independent, so their
implementations can be combined in any way.</p>
<p>Below are more details about the current implementation of each of these verbs.</p>
</section>
</section>
<section id="four-steps-of-causal-inference">
<h1><a class="toc-backref" href="#id12">Four steps of causal inference</a><a class="headerlink" href="#four-steps-of-causal-inference" title="Permalink to this heading"></a></h1>
<section id="i-model-a-causal-problem">
<h2><a class="toc-backref" href="#id13">I. Model a causal problem</a><a class="headerlink" href="#i-model-a-causal-problem" title="Permalink to this heading"></a></h2>
<p>DoWhy creates an underlying causal graphical model for each problem. This
serves to make each causal assumption explicit. This graph need not be
complete—you can provide a partial graph, representing prior
knowledge about some of the variables. DoWhy automatically considers the rest
of the variables as potential confounders.</p>
<p>Currently, DoWhy supports two formats for graph input: <a class="reference external" href="https://github.com/GunterMueller/UNI_PASSAU_FMI_Graph_Drawing">gml</a> (preferred) and
<a class="reference external" href="http://www.graphviz.org/documentation/">dot</a>. We strongly suggest to use gml as the input format, as it works well with networkx. You can provide the graph either as a .gml file or as a string. If you prefer to use dot format, you will need to install additional packages (pydot or pygraphviz, see the installation section above). Both .dot files and string format are supported.</p>
<p>While not recommended, you can also specify common causes and/or instruments directly
instead of providing a graph.</p>
<section id="supported-formats-for-specifying-causal-assumptions">
<h3><a class="toc-backref" href="#id14">Supported formats for specifying causal assumptions</a><a class="headerlink" href="#supported-formats-for-specifying-causal-assumptions" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Graph</strong>: Provide a causal graph in either gml or dot format. Can be a text file
or a string.</p></li>
<li><p><strong>Named variable sets</strong>: Instead of the graph, provide variable names that
correspond to relevant categories, such as common causes, instrumental variables, effect
modifiers, frontdoor variables, etc.</p></li>
</ul>
<p>Examples of how to instantiate a causal model are in the <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy_simple_example.ipynb">Getting Started</a>
notebook.</p>
</section>
</section>
<section id="ii-identify-a-target-estimand-under-the-model">
<h2><a class="toc-backref" href="#id15">II. Identify a target estimand under the model</a><a class="headerlink" href="#ii-identify-a-target-estimand-under-the-model" title="Permalink to this heading"></a></h2>
<p>Based on the causal graph, DoWhy finds all possible ways of identifying a desired causal effect based on
the graphical model. It uses graph-based criteria and do-calculus to find
potential ways find expressions that can identify the causal effect.</p>
<section id="supported-identification-criteria">
<h3><a class="toc-backref" href="#id16">Supported identification criteria</a><a class="headerlink" href="#supported-identification-criteria" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Back-door criterion</p></li>
<li><p>Front-door criterion</p></li>
<li><p>Instrumental Variables</p></li>
<li><p>Mediation (Direct and indirect effect identification)</p></li>
</ul>
<p>Different notebooks illustrate how to use these identification criteria. Check
out the <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy_confounder_example.ipynb">Simple Backdoor</a> notebook for the back-door criterion, and the <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy-simple-iv-example.ipynb">Simple IV</a> notebook for the instrumental variable criterion.</p>
</section>
</section>
<section id="iii-estimate-causal-effect-based-on-the-identified-estimand">
<h2><a class="toc-backref" href="#id17">III. Estimate causal effect based on the identified estimand</a><a class="headerlink" href="#iii-estimate-causal-effect-based-on-the-identified-estimand" title="Permalink to this heading"></a></h2>
<p>DoWhy supports methods based on both back-door criterion and instrumental
variables. It also provides a non-parametric confidence intervals and a permutation test for testing
the statistical significance of obtained estimate.</p>
<section id="supported-estimation-methods">
<h3><a class="toc-backref" href="#id18">Supported estimation methods</a><a class="headerlink" href="#supported-estimation-methods" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>Methods based on estimating the treatment assignment</dt><dd><ul>
<li><p>Propensity-based Stratification</p></li>
<li><p>Propensity Score Matching</p></li>
<li><p>Inverse Propensity Weighting</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Methods based on estimating the outcome model</dt><dd><ul>
<li><p>Linear Regression</p></li>
<li><p>Generalized Linear Models</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Methods based on the instrumental variable equation</dt><dd><ul>
<li><p>Binary Instrument/Wald Estimator</p></li>
<li><p>Two-stage least squares</p></li>
<li><p>Regression discontinuity</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Methods for front-door criterion and general mediation</dt><dd><ul>
<li><p>Two-stage linear regression</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Examples of using these methods are in the <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy_estimation_methods.ipynb">Estimation methods</a>
notebook.</p>
</section>
<section id="using-econml-and-causalml-estimation-methods-in-dowhy">
<h3><a class="toc-backref" href="#id19">Using EconML and CausalML estimation methods in DoWhy</a><a class="headerlink" href="#using-econml-and-causalml-estimation-methods-in-dowhy" title="Permalink to this heading"></a></h3>
<p>It is easy to call external estimation methods using DoWhy. Currently we
support integrations with the <a class="reference external" href="https://github.com/microsoft/econml">EconML</a> and <a class="reference external" href="https://github.com/uber/causalml">CausalML</a> packages. Here’s an example
of estimating conditional treatment effects using EconML’s double machine
learning estimator.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">PolynomialFeatures</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LassoCV</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">GradientBoostingRegressor</span>
<span class="n">dml_estimate</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">estimate_effect</span><span class="p">(</span><span class="n">identified_estimand</span><span class="p">,</span> <span class="n">method_name</span><span class="o">=</span><span class="s2">&quot;backdoor.econml.dml.DML&quot;</span><span class="p">,</span>
                <span class="n">control_value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                <span class="n">treatment_value</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">target_units</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;X0&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">confidence_intervals</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">method_params</span><span class="o">=</span><span class="p">{</span>
                    <span class="s2">&quot;init_params&quot;</span><span class="p">:{</span><span class="s1">&#39;model_y&#39;</span><span class="p">:</span><span class="n">GradientBoostingRegressor</span><span class="p">(),</span>
                                   <span class="s1">&#39;model_t&#39;</span><span class="p">:</span> <span class="n">GradientBoostingRegressor</span><span class="p">(),</span>
                                   <span class="s1">&#39;model_final&#39;</span><span class="p">:</span><span class="n">LassoCV</span><span class="p">(),</span>
                                   <span class="s1">&#39;featurizer&#39;</span><span class="p">:</span><span class="n">PolynomialFeatures</span><span class="p">(</span><span class="n">degree</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">include_bias</span><span class="o">=</span><span class="kc">True</span><span class="p">)},</span>
                    <span class="s2">&quot;fit_params&quot;</span><span class="p">:{}}</span>
                                        <span class="p">)</span>
</pre></div>
</div>
<p>More examples are in the <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy-conditional-treatment-effects.ipynb">Conditional Treatment Effects with DoWhy</a> notebook.</p>
</section>
</section>
<section id="iv-refute-the-obtained-estimate">
<h2><a class="toc-backref" href="#id20">IV. Refute the obtained estimate</a><a class="headerlink" href="#iv-refute-the-obtained-estimate" title="Permalink to this heading"></a></h2>
<p>Having access to multiple refutation methods to validate an effect estimate from a
causal estimator is
a key benefit of using DoWhy.</p>
<section id="supported-refutation-methods">
<h3><a class="toc-backref" href="#id21">Supported refutation methods</a><a class="headerlink" href="#supported-refutation-methods" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Add Random Common Cause</strong>: Does the estimation method change its estimate after
we add an independent random variable as a common cause to the dataset?
(<em>Hint: It should not</em>)</p></li>
<li><p><strong>Placebo Treatment</strong>: What happens to the estimated causal effect when we
replace the true treatment variable with an independent random variable?
(<em>Hint: the effect should go to zero</em>)</p></li>
<li><p><strong>Dummy Outcome</strong>: What happens to the estimated causal effect when we replace
the true outcome variable with an independent random variable? (<em>Hint: The
effect should go to zero</em>)</p></li>
<li><p><strong>Simulated Outcome</strong>: What happens to the estimated causal effect when we
replace the dataset with a simulated dataset based on a known data-generating
process closest to the given dataset? (<em>Hint: It should match the effect parameter
from the data-generating process</em>)</p></li>
<li><p><strong>Add Unobserved Common Causes</strong>: How sensitive is the effect estimate when we
add an additional common cause (confounder) to the dataset that is correlated
with the treatment and the outcome? (<em>Hint: It should not be too sensitive</em>)</p></li>
<li><p><strong>Data Subsets Validation</strong>: Does the estimated effect change significantly when
we replace the given dataset with a randomly selected subset? (<em>Hint: It
should not</em>)</p></li>
<li><p><strong>Bootstrap Validation</strong>: Does the estimated effect change significantly when we
replace the given dataset with bootstrapped samples from the same dataset? (<em>Hint: It should not</em>)</p></li>
</ul>
<p>Examples of using refutation methods are in the <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy_refuter_notebook.ipynb">Refutations</a> notebook. For an advanced refutation that uses a simulated dataset based on user-provided or learnt data-generating processes, check out the <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy_demo_dummy_outcome_refuter.ipynb">Dummy Outcome Refuter</a> notebook.
As a practical example, <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/docs/source/example_notebooks/dowhy_refutation_testing.ipynb">this notebook</a> shows an application of refutation methods on evaluating effect estimators for the Infant Health and Development Program (IHDP) and Lalonde datasets.</p>
</section>
</section>
</section>
<section id="citing-this-package">
<h1><a class="toc-backref" href="#id22">Citing this package</a><a class="headerlink" href="#citing-this-package" title="Permalink to this heading"></a></h1>
<p>If you find DoWhy useful for your research work, please cite us as follows:</p>
<p>Amit Sharma, Emre Kiciman, et al. DoWhy: A Python package for causal inference. 2019. <a class="reference external" href="https://github.com/microsoft/dowhy">https://github.com/microsoft/dowhy</a></p>
<p>Bibtex:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@misc</span><span class="p">{</span><span class="n">dowhy</span><span class="p">,</span>
<span class="n">author</span><span class="o">=</span><span class="p">{</span><span class="n">Sharma</span><span class="p">,</span> <span class="n">Amit</span> <span class="ow">and</span> <span class="n">Kiciman</span><span class="p">,</span> <span class="n">Emre</span> <span class="ow">and</span> <span class="n">others</span><span class="p">},</span>
<span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="n">Do</span><span class="p">{</span><span class="n">W</span><span class="p">}</span><span class="n">hy</span><span class="p">:</span> <span class="p">{</span><span class="n">A</span> <span class="n">Python</span> <span class="n">package</span> <span class="k">for</span> <span class="n">causal</span> <span class="n">inference</span><span class="p">}},</span>
<span class="n">howpublished</span><span class="o">=</span><span class="p">{</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">microsoft</span><span class="o">/</span><span class="n">dowhy</span><span class="p">},</span>
<span class="n">year</span><span class="o">=</span><span class="p">{</span><span class="mi">2019</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Alternatively, you can cite our Arxiv paper on DoWhy.</p>
<p>Amit Sharma, Emre Kiciman. DoWhy: An End-to-End Library for Causal Inference. 2020. <a class="reference external" href="https://arxiv.org/abs/2011.04216">https://arxiv.org/abs/2011.04216</a></p>
<p>Bibtex:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@article</span><span class="p">{</span><span class="n">dowhypaper</span><span class="p">,</span>
<span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="n">DoWhy</span><span class="p">:</span> <span class="n">An</span> <span class="n">End</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">End</span> <span class="n">Library</span> <span class="k">for</span> <span class="n">Causal</span> <span class="n">Inference</span><span class="p">},</span>
<span class="n">author</span><span class="o">=</span><span class="p">{</span><span class="n">Sharma</span><span class="p">,</span> <span class="n">Amit</span> <span class="ow">and</span> <span class="n">Kiciman</span><span class="p">,</span> <span class="n">Emre</span><span class="p">},</span>
<span class="n">journal</span><span class="o">=</span><span class="p">{</span><span class="n">arXiv</span> <span class="n">preprint</span> <span class="n">arXiv</span><span class="p">:</span><span class="mf">2011.04216</span><span class="p">},</span>
<span class="n">year</span><span class="o">=</span><span class="p">{</span><span class="mi">2020</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="roadmap">
<h1><a class="toc-backref" href="#id23">Roadmap</a><a class="headerlink" href="#roadmap" title="Permalink to this heading"></a></h1>
<p>The <a class="reference external" href="https://github.com/microsoft/dowhy/projects">projects</a> page lists the next steps for DoWhy. If you would like to contribute, have a look at the current projects. If you have a specific request for DoWhy, please <a class="reference external" href="https://github.com/microsoft/dowhy/issues">raise an issue</a>.</p>
</section>
<section id="contributing">
<h1><a class="toc-backref" href="#id24">Contributing</a><a class="headerlink" href="#contributing" title="Permalink to this heading"></a></h1>
<p>This project welcomes contributions and suggestions. For a guide to contributing and a list of all contributors, check out <a class="reference external" href="https://github.com/microsoft/dowhy/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>
<p>Most contributions require you to agree to a
Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us
the rights to use your contribution. For details, visit <a class="reference external" href="https://cla.microsoft.com">https://cla.microsoft.com</a>.</p>
<p>When you submit a pull request, a CLA-bot will automatically determine whether you need to provide
a CLA and decorate the PR appropriately (e.g., label, comment). Simply follow the instructions
provided by the bot. You will only need to do this once across all repos using our CLA.</p>
<p>This project has adopted the <a class="reference external" href="https://opensource.microsoft.com/codeofconduct/">Microsoft Open Source Code of Conduct</a>.
For more information see the <a class="reference external" href="https://opensource.microsoft.com/codeofconduct/faq/">Code of Conduct FAQ</a> or
contact <a class="reference external" href="mailto:opencode&#37;&#52;&#48;microsoft&#46;com">opencode<span>&#64;</span>microsoft<span>&#46;</span>com</a> with any additional questions or comments.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="DoWhy | An end-to-end library for causal inference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="example_notebooks/tutorial-causalinference-machinelearning-using-dowhy-econml.html" class="btn btn-neutral float-right" title="Tutorial on Causal Inference and its Connections to Machine Learning (Using DoWhy+EconML)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, PyWhy contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: v0.6
    <span class="fa fa-caret-down"></span>
  </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Releases</dt>
            <dd><a href="../v0.1.1-alpha/readme.html">v0.1.1-alpha</a></dd>
            <dd><a href="../v0.2/readme.html">v0.2</a></dd>
            <dd><a href="../v0.4/readme.html">v0.4</a></dd>
            <dd><a href="../v0.5/readme.html">v0.5</a></dd>
            <dd><a href="../v0.5.1/readme.html">v0.5.1</a></dd>
            <dd><a href="readme.html">v0.6</a></dd>
            <dd><a href="../v0.7/readme.html">v0.7</a></dd>
            <dd><a href="../v0.7.1/readme.html">v0.7.1</a></dd>
            <dd><a href="../v0.8/index.html">v0.8</a></dd>
            <!-- TODO: add mechanism to add new version here. Probably just render them in from generate_docs.sh. -->
        </dl>
        <dl>
            <dt>Branches</dt>
            <!-- hard-coding the link to main -->
            <!-- It would be nice if this opened the same page on main branch, but that seems to be overkill
                 right now. Therefore defaulting to the starting page (index). -->
            <dd><a href="/dowhy/main/index.html">main</a></dd>
        </dl>
    </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>